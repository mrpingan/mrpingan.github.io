<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://mrpingan.github.io</id>
    <title>Ping&apos;s Home</title>
    <updated>2019-09-09T10:06:07.824Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://mrpingan.github.io"/>
    <link rel="self" href="https://mrpingan.github.io/atom.xml"/>
    <subtitle>æ¸©æ•…è€ŒçŸ¥æ–°</subtitle>
    <logo>https://mrpingan.github.io/images/avatar.png</logo>
    <icon>https://mrpingan.github.io/favicon.ico</icon>
    <rights>All rights reserved 2019, Ping&apos;s Home</rights>
    <entry>
        <title type="html"><![CDATA[Jxplorerè¿æ¥LDAP]]></title>
        <id>https://mrpingan.github.io/post/jxplorer-lian-jie-ldap</id>
        <link href="https://mrpingan.github.io/post/jxplorer-lian-jie-ldap">
        </link>
        <updated>2019-09-08T05:20:46.000Z</updated>
        <content type="html"><![CDATA[<p><code>Jxplorer</code>æ˜¯JAVAè¿æ¥LDAPçš„å®¢æˆ·ç«¯ï¼Œæ”¯æŒå¤šç§è¿æ¥SSLã€SASLï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒå¾ˆå¤šå¹³å°ã€‚å®˜ç½‘ä¸‹è½½åœ°å€ï¼šhttp://jxplorer.org/downloads/users.htmlã€‚</p>
<h1 id="éå®‰å…¨è¿æ¥">éå®‰å…¨è¿æ¥</h1>
<p>å¦‚æœLDAPæœåŠ¡ç«¯æœªå¼€å¯TLSï¼Œæ­¤æ—¶å»ºç«‹çš„è¿æ¥æ˜¯éå®‰å…¨è¿æ¥ï¼Œä½¿ç”¨çš„ç«¯å£æ˜¯389.<br>
<img src="https://mrpingan.github.io/post-images/1567920506007.png" alt=""><br>
å¡«å†™å¯¹åº”çš„ä¿¡æ¯ï¼Œå°±å¯ä»¥è¿æ¥ä¸Šäº†</p>
<h1 id="å®‰å…¨è¿æ¥">å®‰å…¨è¿æ¥</h1>
<p>LDAPä½¿ç”¨çš„æ˜¯SSLï¼Œå³é‡æ–°å¼€å¯ä¸€ä¸ªSSLç«¯å£æ¥å»ºç«‹å®‰å…¨é€šé“ï¼Œä¸è¿‡è¿™ç§æ–¹å¼å·²ç»è¢«æ·˜æ±°ã€‚å–è€Œä»£ä¹‹çš„æ˜¯STARTTLSï¼Œè¿™ç§æ–¹å¼å’Œ389å¤ç”¨åŒä¸€ä¸ªé€šé“ï¼Œä¸è¿‡ä¼ è¾“çš„æ•°æ®éƒ½æ˜¯åŠ å¯†çš„ã€‚<br>
æˆ‘è¿™å„¿ä½¿ç”¨çš„æ˜¯SSLï¼Œè€Œä¸”ä½¿ç”¨çš„è‡ªç­¾åCAè¯ä¹¦ã€‚å¹¶æœªä½¿ç”¨STARTTLSã€‚</p>
<h2 id="å¯¼å…¥caè¯ä¹¦">å¯¼å…¥CAè¯ä¹¦</h2>
<p>é€‰æ‹©&quot;å®‰å…¨&quot; â€”â€” &quot;ä¿¡ä»»çš„æœåŠ¡å™¨åŠCA&quot;<br>
<img src="https://mrpingan.github.io/post-images/1567920720636.png" alt=""><br>
é€‰æ‹©&quot;æ–°å¢å‡­è¯&quot;<br>
<img src="https://mrpingan.github.io/post-images/1567920784200.png" alt=""><br>
é€‰æ‹©æŒ‡å®šçš„CAè¯ä¹¦ï¼Œå¹¶ä¸ºCAè¯ä¹¦æŒ‡å®šä¸€ä¸ªåç§°<br>
<img src="https://mrpingan.github.io/post-images/1567920819137.png" alt=""><br>
è¿˜éœ€è¦è¾“å…¥ä¸€ä¸ªå¯†ç ï¼Œé»˜è®¤çš„å¯†ç æ˜¯&quot;changeit&quot;<br>
<img src="https://mrpingan.github.io/post-images/1567920864163.png" alt=""><br>
ç‚¹å‡»&quot;ç¡®è®¤&quot;ä¹‹åå°±å¯ä»¥æ­£å¸¸å¯¼å…¥äº†</p>
<p>æ–°å»ºä¸€ä¸ªè¿æ¥<br>
<img src="https://mrpingan.github.io/post-images/1567920948221.png" alt=""><br>
å¡«å†™å¯¹åº”çš„ä¿¡æ¯ï¼Œsslçš„æ–¹å¼éœ€è¦ä¿®æ”¹ç«¯å£ä¸º636ã€‚å¦‚æœLDAPä½¿ç”¨çš„æ˜¯STARTTLSçš„æ–¹å¼ï¼Œåˆ™ç«¯å£ä¾ç„¶æ˜¯389ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Centos 7/RHEL 7é…ç½®OpenLDAP SSL]]></title>
        <id>https://mrpingan.github.io/post/centos-7rhel-7-pei-zhi-openldap-ssl</id>
        <link href="https://mrpingan.github.io/post/centos-7rhel-7-pei-zhi-openldap-ssl">
        </link>
        <updated>2019-09-07T09:01:46.000Z</updated>
        <content type="html"><![CDATA[<h1 id="é¢„å…ˆå‡†å¤‡">é¢„å…ˆå‡†å¤‡</h1>
<p>åœ¨<code>/etc/hosts</code>ä¸­æ·»åŠ ä¸€æ¡LDAPæœåŠ¡ç«¯ä¸»æœºåŸŸåæ˜ å°„è®°å½•</p>
<pre><code>192.168.33.11 server.itzgeek.local server
</code></pre>
<h1 id="åˆ›å»º-ldap-è¯ä¹¦">åˆ›å»º LDAP è¯ä¹¦</h1>
<h2 id="è‡ªç­¾åè¯ä¹¦">è‡ªç­¾åè¯ä¹¦</h2>
<p>ä¸ºLDAPæœåŠ¡ç«¯åˆ›å»ºä¸€ä¸ªè‡ªç­¾åè¯ä¹¦,ä¸‹é¢çš„å‘½ä»¤å°†ä¼šåœ¨<code>/etc/openldap/certs/</code>ç”Ÿæˆè¯ä¹¦å’Œç§é’¥</p>
<pre><code>openssl req -new -x509 -nodes -out /etc/openldap/certs/itzgeekldap.crt -keyout /etc/openldap/certs/itzgeekldap.key -days 1460
</code></pre>
<p>è¾“å‡ºå†…å®¹ï¼š</p>
<pre><code>Generating a 2048 bit RSA private key
.................................................................................+++
...................................+++
writing new private key to '/etc/openldap/certs/itzgeekldap.key'
-----
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
-----
Country Name (2 letter code) [XX]:CN
State or Province Name (full name) []:shenzhen
Locality Name (eg, city) [Default City]:shenzhen
Organization Name (eg, company) [Default Company Ltd]:ITzGeek
Organizational Unit Name (eg, section) []:IT Infra
Common Name (eg, your name or your server's hostname) []:server.itzgeek.local
Email Address []:admin@itzgeek.com
</code></pre>
<p>è®¾ç½®æƒé™</p>
<pre><code>chown -R ldap:ldap /etc/openldap/certs/itzgeek*
</code></pre>
<p>æŸ¥çœ‹åˆ›å»ºçš„è¯ä¹¦å’Œç§é’¥</p>
<pre><code>[root@server openldap]# ll /etc/openldap/certs/itz*
-rw-r--r--. 1 root root 1456 Sep  7 09:08 /etc/openldap/certs/itzgeekldap.crt
-rw-r--r--. 1 root root 1704 Sep  7 09:08 /etc/openldap/certs/itzgeekldap.key
</code></pre>
<p>åˆ›å»º<code>certs.ldif</code>é…ç½®LDAPä½¿ç”¨è‡ªç­¾åè¯ä¹¦</p>
<pre><code>dn: cn=config
changetype: modify
replace: olcTLSCertificateFile
olcTLSCertificateFile: /etc/openldap/certs/itzgeekldap.crt
-
replace: olcTLSCertificateKeyFile
olcTLSCertificateKeyFile: /etc/openldap/certs/itzgeekldap.key
</code></pre>
<p>åˆ·æ–°é…ç½®ï¼š</p>
<pre><code>ldapmodify -Y EXTERNAL  -H ldapi:/// -f certs.ldif
</code></pre>
<p>éªŒè¯é…ç½®ï¼š</p>
<pre><code>slaptest -u
</code></pre>
<p>é…ç½®æ­£ç¡®æ˜¾ç¤ºå¦‚ä¸‹ï¼š</p>
<pre><code>config file testing succeeded
</code></pre>
<h1 id="è‡ªå®šä¹‰caç­¾åè¯ä¹¦">è‡ªå®šä¹‰CAç­¾åè¯ä¹¦</h1>
<p>åˆ›å»ºæ ¹ç§é’¥</p>
<pre><code>cd  /etc/openldap/certs/
openssl genrsa -out itzgeekrootCA.key 2048
</code></pre>
<p>åˆ›å»ºè‡ªç­¾åæ ¹è¯ä¹¦</p>
<pre><code>openssl req -x509 -new -nodes -key itzgeekrootCA.key -sha256 -days 1024 -out itzgeekrootCA.pem
</code></pre>
<p>è¾“å…¥ä¿¡æ¯å¦‚ä¸‹ï¼š</p>
<pre><code>You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
-----
Country Name (2 letter code) [XX]:CN
State or Province Name (full name) []:shenzhen
Locality Name (eg, city) [Default City]:shenzhen
Organization Name (eg, company) [Default Company Ltd]:ITzGeek
Organizational Unit Name (eg, section) []:IT Infra
Common Name (eg, your name or your server's hostname) []:ITzGeek Root CA
Email Address []:admin@itzgeek.com
</code></pre>
<p>LDAPæœåŠ¡ç«¯åˆ›å»ºç§é’¥</p>
<pre><code>openssl genrsa -out itzgeekldap.key 2048
</code></pre>
<p>æœ‰äº†ç§é’¥ä¹‹åï¼Œå°±å¯ä»¥åˆ›å»ºä¸€ä¸ªcsr(certificate signing request)æ–‡ä»¶</p>
<pre><code>openssl req -new -key itzgeekldap.key -out itzgeekldap.csr
</code></pre>
<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<pre><code>You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
-----
Country Name (2 letter code) [XX]:CN
State or Province Name (full name) []:shenzhen
Locality Name (eg, city) [Default City]:shenzhen
Organization Name (eg, company) [Default Company Ltd]:ITzGeek
Organizational Unit Name (eg, section) []:IT Infra
Common Name (eg, your name or your server's hostname) []:server.itzgeek.local
Email Address []:admin@itzgeek.com

Please enter the following 'extra' attributes
to be sent with your certificate request
A challenge password []:
An optional company name []:
</code></pre>
<p>ä½¿ç”¨ç”¨æˆ·æ ¹CAç­¾åä¸€ä¸ªCSR</p>
<pre><code>openssl x509 -req -in itzgeekldap.csr -CA itzgeekrootCA.pem -CAkey itzgeekrootCA.key -CAcreateserial -out itzgeekldap.crt -days 1460 -sha256
</code></pre>
<p>è®¾ç½®æƒé™</p>
<pre><code>chown -R ldap:ldap /etc/openldap/certs/itzgeek*
</code></pre>
<p>æŸ¥çœ‹è¯ä¹¦æ–‡ä»¶</p>
<pre><code>-rw-r--r--. 1 ldap ldap 1334 Sep  7 11:23 /etc/openldap/certs/itzgeekldap.crt
-rw-r--r--. 1 ldap ldap 1074 Sep  7 11:22 /etc/openldap/certs/itzgeekldap.csr
-rw-r--r--. 1 ldap ldap 1675 Sep  7 11:20 /etc/openldap/certs/itzgeekldap.key
-rw-r--r--. 1 ldap ldap 1679 Sep  7 11:17 /etc/openldap/certs/itzgeekrootCA.key
-rw-r--r--. 1 ldap ldap 1444 Sep  7 11:18 /etc/openldap/certs/itzgeekrootCA.pem
-rw-r--r--. 1 ldap ldap   17 Sep  7 11:23 /etc/openldap/certs/itzgeekrootCA.srl
</code></pre>
<p>åˆ›å»ºcerts.ldifæ–‡ä»¶æ¥é…ç½®LDAP</p>
<pre><code>vi certs.ldif
</code></pre>
<p>æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code>dn: cn=config
changetype: modify
replace: olcTLSCACertificateFile
olcTLSCACertificateFile: /etc/openldap/certs/itzgeekrootCA.pem
-
replace: olcTLSCertificateFile
olcTLSCertificateFile: /etc/openldap/certs/itzgeekldap.crt
-
replace: olcTLSCertificateKeyFile
olcTLSCertificateKeyFile: /etc/openldap/certs/itzgeekldap.key
</code></pre>
<p>åº”ç”¨é…ç½®æ–‡ä»¶</p>
<pre><code>ldapmodify -Y EXTERNAL  -H ldapi:/// -f certs.ldif
</code></pre>
<p>è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<pre><code>SASL/EXTERNAL authentication started
SASL username: gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth
SASL SSF: 0
modifying entry &quot;cn=config&quot;

</code></pre>
<h1 id="é…ç½®openldap-ssl">é…ç½®OpenLDAP SSL</h1>
<p>ç¼–è¾‘<code>/etc/sysconfig/slapd</code>,å¢åŠ <code>ldaps:///</code></p>
<pre><code>SLAPD_URLS=&quot;ldapi:/// ldap:/// ldaps:///&quot;
</code></pre>
<p>é‡å¯æœåŠ¡</p>
<pre><code>systemctl restart slapd
</code></pre>
<p>æŸ¥çœ‹å¯åŠ¨ç«¯å£</p>
<pre><code>tcp    LISTEN     0      128       *:636                   *:*                   users:((&quot;slapd&quot;,pid=28160,fd=10))
tcp    LISTEN     0      128      :::636                  :::*                   users:((&quot;slapd&quot;,pid=28160,fd=11))
</code></pre>
<p>636æ˜¯OpenLDAP sslç«¯å£ã€‚</p>
<h1 id="openldapå®¢æˆ·ç«¯é…ç½®ssl">OpenLDAPå®¢æˆ·ç«¯é…ç½®SSL</h1>
<p>å®‰è£…è½¯ä»¶åŒ…</p>
<pre><code>yum install -y openldap-clients nss-pam-ldapd
</code></pre>
<p>æ‰§è¡Œ<code>authconfig</code>å‘½ä»¤å°†å®¢æˆ·ç«¯æœºå™¨æ³¨å†Œåˆ°æœåŠ¡ç«¯</p>
<pre><code>authconfig --enableldap --enableldapauth --ldapserver=ldaps://server.itzgeek.local --ldapbasedn=&quot;dc=itzgeek,dc=local&quot; --enablemkhomedir --disableldaptls --update
</code></pre>
<h2 id="å®¢æˆ·ç«¯é…ç½®">å®¢æˆ·ç«¯é…ç½®</h2>
<p>ç¼–è¾‘<code>nslcd.conf</code>é…ç½®æ–‡ä»¶</p>
<pre><code>	vi /etc/nslcd.conf
</code></pre>
<p>å¢åŠ ä¸€è¡Œ</p>
<pre><code>tls_reqcert allow
</code></pre>
<p>æ‹·è´LDAPæœåŠ¡ç«¯çš„CAå…¬é’¥åˆ°å®¢æˆ·ç«¯çš„<code>/etc/openldap/cacerts</code>ç›®å½•ä¸­</p>
<pre><code>cd /etc/openldap/cacerts/
scp -pr 192.168.33.11:/etc/openldap/certs/itzgeekrootCA.pem /etc/openldap/cacerts
</code></pre>
<p>ä¸ºCAè¯ä¹¦åˆ›å»ºhashå€¼</p>
<pre><code>/etc/pki/tls/misc/c_hash /etc/openldap/cacerts/itzgeekrootCA.pem
</code></pre>
<p>è¾“å‡ºï¼š</p>
<pre><code>1a981562.0 =&gt; /etc/openldap/cacerts/itzgeekrootCA.pem
</code></pre>
<p>åˆ›å»ºä¸€ä¸ªè½¯è¿æ¥</p>
<pre><code>ln -s /etc/openldap/cacerts/itzgeekrootCA.pem 1a981562.0
</code></pre>
<p>é‡å¯LDAPå®¢æˆ·ç«¯æœåŠ¡</p>
<pre><code>systemctl restart nslcd
</code></pre>
<h1 id="éªŒè¯ldapç™»å½•">éªŒè¯LDAPç™»å½•</h1>
<p>ä½¿ç”¨<code>getent</code>å‘½ä»¤æ¥è·å–LDAPæœåŠ¡ç«¯çš„æ¡ç›®</p>
<pre><code>getent passwd raj
</code></pre>
<p>è¾“å‡ºï¼š</p>
<pre><code>raj:x:9999:100:Raj [Admin (at) ITzGeek]:/home/raj:/bin/bash
</code></pre>
<p>ç™»å½•ï¼š<br>
<img src="https://mrpingan.github.io/post-images/1567857602492.png" alt=""><br>
æŸ¥çœ‹æ—¥å¿—TLSå»ºç«‹æˆåŠŸ<br>
<img src="https://mrpingan.github.io/post-images/1567858011786.png" alt=""></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Centos7/RHEL 7 LDAP é…ç½®]]></title>
        <id>https://mrpingan.github.io/post/ldap-ssl-pei-zhi</id>
        <link href="https://mrpingan.github.io/post/ldap-ssl-pei-zhi">
        </link>
        <updated>2019-09-07T06:48:27.000Z</updated>
        <content type="html"><![CDATA[<h1 id="ç¯å¢ƒ">ç¯å¢ƒ</h1>
<table>
<thead>
<tr>
<th>hostname</th>
<th>ip</th>
<th>os</th>
<th>purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>server.itzgeek.local</td>
<td>192.168.33.11</td>
<td>centos 7</td>
<td>æœåŠ¡ç«¯</td>
</tr>
<tr>
<td>client.itzgeek.local</td>
<td>192.168.33.12</td>
<td>centos 7</td>
<td>å®¢æˆ·ç«¯</td>
</tr>
</tbody>
</table>
<h1 id="è¦æ±‚">è¦æ±‚</h1>
<p>ç¡®è®¤LDAPæœåŠ¡ç«¯server.itzgeek.local(192.168.33.11)å’ŒLDAPå®¢æˆ·ç«¯client.itzgeek.local(192.168.33.12)éƒ½å¯ä»¥pingé€š<br>
ä¿è¯æ¯ä¸€å°æœåŠ¡å™¨çš„hostsæ–‡ä»¶ä¸­éƒ½åŒ…å«</p>
<pre><code>192.168.33.12   client.itzgeek.local    client
192.168.33.11   server.itzgeek.local    server
</code></pre>
<h1 id="å®‰è£…ldapåŒ…">å®‰è£…LDAPåŒ…</h1>
<p>å®‰è£…LDAPåŒ…ï¼Œopenldap-serversæ˜¯æœåŠ¡ç«¯çš„åŒ…ï¼Œopenldap-clientsæ˜¯å®¢æˆ·ç«¯<br>
<code>yum -y install openldap compat-openldap openldap-clients openldap-servers openldap-servers-sql openldap-devel</code></p>
<h2 id="å¯åŠ¨ldap-serverå¹¶åŠ å…¥è‡ªå¯åŠ¨">å¯åŠ¨LDAP serverå¹¶åŠ å…¥è‡ªå¯åŠ¨</h2>
<pre><code>systemctl start slapd
systemctl enable slapd
</code></pre>
<p>æŸ¥çœ‹LDAPæ˜¯å¦å¯åŠ¨</p>
<pre><code>ss -antup | grep -i 389
</code></pre>
<p>è¾“å‡ºå¦‚ä¸‹è¡¨ç¤ºç«¯å£å·²å¯åŠ¨</p>
<pre><code>tcp    LISTEN     0      128       *:389                   *:*                   users:((&quot;slapd&quot;,pid=5740,fd=8))
tcp    LISTEN     0      128      :::389                  :::*                   users:((&quot;slapd&quot;,pid=5740,fd=9))
</code></pre>
<h2 id="è®¾ç½®ç®¡ç†å‘˜å¯†ç ">è®¾ç½®ç®¡ç†å‘˜å¯†ç </h2>
<p>ç”ŸæˆsshaåŠ å¯†å¯†ç ,æ¯”å¦‚è¿™å„¿çš„å¯†ç ä¸ºadmin</p>
<pre><code>slappasswd -h {SSHA} -s admin
</code></pre>
<p>è¾“å‡ºï¼š</p>
<pre><code>{SSHA}nU4sM/uweUR3xhk1A521Fs5DlAO/gEbx
</code></pre>
<h2 id="é…ç½®ldapæœåŠ¡ç«¯">é…ç½®LDAPæœåŠ¡ç«¯</h2>
<p>OpenLDAPæœåŠ¡ç«¯é…ç½®æ–‡ä»¶æ”¾åœ¨<code>/etc/openldap/slapd.d/</code>ã€‚ä¿®æ”¹ä¸€ä¸‹<code>olcSuffix</code>å’Œ<code>olcRootDN</code>å˜é‡ã€‚<br>
<code>olcSuffix</code>    â€”â€”   æ•°æ®åº“åç¼€ï¼Œå®ƒæ˜¯LDAPæœåŠ¡å™¨æä¾›ä¿¡æ¯çš„åŸŸåã€‚ç®€å•æ¥è¯´ï¼Œå®ƒåº”è¯¥æ›´æ”¹ä¸ºåŸŸåã€‚<br>
<code>olcRootDN</code> â€”â€”   ä¸€èˆ¬æŒ‡çš„æ˜¯rootç”¨æˆ·ï¼Œå…·æœ‰æ‰€æœ‰è®¿é—®æƒé™çš„ç”¨æˆ·<br>
<code>olcRootPW</code> â€”â€”  RootDNçš„å¯†ç </p>
<blockquote>
<p>ä»¥ä¸Šçš„å˜é‡éœ€è¦åœ¨<code>/etc/openldap/slapd.d/cn=config/olcDatabase={2}hdb.ldif</code>ä¸­æ›´æ–°ï¼Œä¸å»ºè®®æ‰‹åŠ¨ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ï¼Œæ‰€æœ‰çš„å˜æ›´éƒ½åº”è¯¥åˆ›å»ºä¸€ä¸ª<code>.ldif</code>æ–‡ä»¶ï¼Œä½¿ç”¨ldapçš„å‘½ä»¤å»æ‰§è¡Œ</p>
</blockquote>
<pre><code>vi db.ldif
</code></pre>
<p>æ·»åŠ ä¸‹é¢çš„å†…å®¹ï¼š</p>
<pre><code>dn: olcDatabase={2}hdb,cn=config
changetype: modify
replace: olcSuffix
olcSuffix: dc=itzgeek,dc=local

dn: olcDatabase={2}hdb,cn=config
changetype: modify
replace: olcRootDN
olcRootDN: cn=admin,dc=itzgeek,dc=local

dn: olcDatabase={2}hdb,cn=config
changetype: modify
replace: olcRootPW
olcRootPW: {SSHA}nU4sM/uweUR3xhk1A521Fs5DlAO/gEbx
</code></pre>
<p>æŠŠé…ç½®å‘é€ç»™æœåŠ¡ç«¯ï¼Œä¸éœ€é‡å¯å³æ—¶ç”Ÿæ•ˆ</p>
<pre><code>ldapmodify -Y EXTERNAL  -H ldapi:/// -f db.ldif
</code></pre>
<p>è¾“å‡ºä¸‹é¢å†…å®¹è¡¨ç¤ºæˆåŠŸï¼š</p>
<pre><code>SASL/EXTERNAL authentication started
SASL username: gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth
SASL SSF: 0
modifying entry &quot;olcDatabase={2}hdb,cn=config&quot;

modifying entry &quot;olcDatabase={2}hdb,cn=config&quot;

modifying entry &quot;olcDatabase={2}hdb,cn=config&quot;
</code></pre>
<p>åˆšæ‰çš„æ–‡ä»¶ä¸­æˆ‘ä»¬è®¾ç½®äº†basedn,rootdn,rootpasswordï¼Œç°åœ¨æˆ‘ä»¬è®¾ç½®ä¸€ä¸‹ACLæƒé™</p>
<pre><code>vi monitor.ldif
</code></pre>
<p>ä½¿ç”¨ä¸‹é¢çš„é…ç½®ï¼š</p>
<pre><code>dn: olcDatabase={1}monitor,cn=config
changetype: modify
replace: olcAccess
olcAccess: {0}to * by dn.base=&quot;gidNumber=0+uidNumber=0,cn=peercred,cn=external, cn=auth&quot; read by dn.base=&quot;cn=admin,dc=itzgeek,dc=local&quot; read by * none
</code></pre>
<p>åŒæ ·çš„ï¼Œä¹Ÿè¦å‘é€é…ç½®ç»™æœåŠ¡ç«¯</p>
<pre><code>ldapmodify -Y EXTERNAL  -H ldapi:/// -f monitor.ldif
</code></pre>
<p>è¾“å‡ºå¦‚ä¸‹ï¼Œè¡¨ç¤ºæˆåŠŸï¼š</p>
<pre><code>SASL/EXTERNAL authentication started
SASL username: gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth
SASL SSF: 0
modifying entry &quot;olcDatabase={1}monitor,cn=config&quot;
</code></pre>
<h1 id="è®¾ç½®ldapæ•°æ®åº“">è®¾ç½®LDAPæ•°æ®åº“</h1>
<p>æ‹·è´æ•°æ®åº“æ ·æœ¬é…ç½®æ–‡ä»¶åˆ°<code>/var/lib/ldap</code>,æ›´æ–°æ–‡ä»¶æƒé™</p>
<pre><code>cp /usr/share/openldap-servers/DB_CONFIG.example /var/lib/ldap/DB_CONFIG
chown ldap:ldap /var/lib/ldap/*
</code></pre>
<p>å¢åŠ inetorgperson LDAP schemasï¼Œä½†æ˜¯inetorgpersonä¾èµ–cosineå’Œnis LDAP schemasï¼Œæ‰€ä»¥è¦å…ˆå®‰è£…cosineå’Œnis LDAP schemas</p>
<pre><code>ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/cosine.ldif
ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/nis.ldif 
ldapadd -Y EXTERNAL -H ldapi:/// -f /etc/openldap/schema/inetorgperson.ldif
</code></pre>
<p>é…ç½®åŸºæœ¬ç»“æ„é…ç½®æ–‡ä»¶base.ldif</p>
<pre><code>dn: dc=itzgeek,dc=local
dc: itzgeek
objectClass: top
objectClass: domain

dn: cn=admin ,dc=itzgeek,dc=local
objectClass: organizationalRole
cn: admin
description: LDAP Manager

dn: ou=People,dc=itzgeek,dc=local
objectClass: organizationalUnit
ou: People

dn: ou=Group,dc=itzgeek,dc=local
objectClass: organizationalUnit
ou: Group
</code></pre>
<p>ç”Ÿæˆç›®å½•ç»“æ„ï¼š</p>
<pre><code>ldapadd -x -W -D &quot;cn=admin,dc=itzgeek,dc=local&quot; -f base.ldif
</code></pre>
<p>è¦è¾“å…¥<code>cn=admin,dc=itzgeek,dc=local</code>çš„å¯†ç æ‰å¯ä»¥</p>
<p>è¾“å‡ºå†…å®¹ï¼š</p>
<pre><code>Enter LDAP Password:
adding new entry &quot;dc=itzgeek,dc=local&quot;

adding new entry &quot;cn=admin ,dc=itzgeek,dc=local&quot;

adding new entry &quot;ou=People,dc=itzgeek,dc=local&quot;

adding new entry &quot;ou=Group,dc=itzgeek,dc=local&quot;
</code></pre>
<p>ä½¿ç”¨<code>JXplorer</code>æŸ¥çœ‹ç›®å½•æ ‘<br>
<img src="https://mrpingan.github.io/post-images/1567842998859.png" alt=""></p>
<h1 id="åˆ›å»ºldapç”¨æˆ·">åˆ›å»ºLDAPç”¨æˆ·</h1>
<pre><code>vi raj.ldif
</code></pre>
<p>å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre><code>dn: uid=raj,ou=People,dc=itzgeek,dc=local
objectClass: top
objectClass: account
objectClass: posixAccount
objectClass: shadowAccount
cn: raj
uid: raj
uidNumber: 9999
gidNumber: 100
homeDirectory: /home/raj
loginShell: /bin/bash
gecos: Raj [Admin (at) ITzGeek]
userPassword: {crypt}x
shadowLastChange: 17058
shadowMin: 0
shadowMax: 99999
shadowWarning: 7
</code></pre>
<p>æŠŠé…ç½®å†™å…¥LDAPæœåŠ¡ç«¯</p>
<pre><code>ldapadd -x -W -D &quot;cn=admin,dc=itzgeek,dc=local&quot; -f raj.ldif
</code></pre>
<p>è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<pre><code>Enter LDAP Password:
adding new entry &quot;uid=raj,ou=People,dc=itzgeek,dc=local&quot;
</code></pre>
<p>ç»™<code>raj</code>ç”¨æˆ·è®¾ç½®ä¸€ä¸ªå¯†ç </p>
<pre><code>ldappasswd -s password123 -W -D &quot;cn=admin,dc=itzgeek,dc=local&quot; -x &quot;uid=raj,ou=People,dc=itzgeek,dc=local&quot;
</code></pre>
<p>-s ç»™æŒ‡å®šç”¨æˆ·æŒ‡å®šå¯†ç <br>
-x æŒ‡å®šé…ç½®å¯†ç ç”¨æˆ·<br>
-D æŒ‡å®šå¯ä»¥ä¿®æ”¹å¯†ç çš„dn<br>
éªŒè¯<code>raj</code>ç”¨æˆ·ï¼š</p>
<pre><code>ldapsearch -x cn=raj -b dc=itzgeek,dc=local
</code></pre>
<p>è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<pre><code># extended LDIF
#
# LDAPv3
# base &lt;dc=itzgeek,dc=local&gt; with scope subtree
# filter: cn=raj
# requesting: ALL
#

# raj, People, itzgeek.local
dn: uid=raj,ou=People,dc=itzgeek,dc=local
objectClass: top
objectClass: account
objectClass: posixAccount
objectClass: shadowAccount
cn: raj
uid: raj
uidNumber: 9999
gidNumber: 100
homeDirectory: /home/raj
loginShell: /bin/bash
gecos: Raj [Admin (at) ITzGeek]
shadowLastChange: 17058
shadowMin: 0
shadowMax: 99999
shadowWarning: 7
userPassword:: e1NTSEF9SmwvcUZRSzAzRVV0dmZ0UXNPYU9zZjdvdWdDRGR2dlA=

# search result
search: 2
result: 0 Success

# numResponses: 2
# numEntries: 1
</code></pre>
<p>åˆ é™¤ä¸€ä¸ªæ¡ç›®ï¼š</p>
<pre><code>ldapdelete -W -D &quot;cn=admin,dc=itzgeek,dc=local&quot; &quot;uid=raj,ou=People,dc=itzgeek,dc=local&quot;
</code></pre>
<h1 id="é˜²ç«å¢™">é˜²ç«å¢™</h1>
<p>å¦‚æœå¼€å¯äº†é˜²ç«å¢™ï¼Œè¦åœ¨é˜²ç«å¢™ä¸Šå¼€å¯ç«¯å£TCP(389)</p>
<pre><code>firewall-cmd --permanent --add-service=ldap
firewall-cmd --reload
</code></pre>
<h1 id="å¼€å¯ldapæ—¥å¿—">å¼€å¯LDAPæ—¥å¿—</h1>
<p>pass</p>
<h1 id="ldapå®¢æˆ·ç«¯é…ç½®">LDAPå®¢æˆ·ç«¯é…ç½®</h1>
<p>åœ¨å®¢æˆ·ç«¯æœºå™¨ä¸Šå®‰è£…å¿…è¦çš„åŒ…</p>
<pre><code>yum install -y openldap-clients nss-pam-ldapd
</code></pre>
<p>æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å°†å®¢æˆ·ç«¯æ³¨å†Œåˆ°LDAPæœåŠ¡ç«¯ä¸Š,192.168.33.11æ˜¯LDAPæœåŠ¡ç«¯çš„IPåœ°å€</p>
<pre><code>authconfig --enableldap --enableldapauth --ldapserver=192.168.33.11 --ldapbasedn=&quot;dc=itzgeek,dc=local&quot; --enablemkhomedir --update
</code></pre>
<p>é‡å¯LDAPå®¢æˆ·ç«¯æœåŠ¡</p>
<pre><code>systemctl restart  nslcd
</code></pre>
<h1 id="éªŒè¯ldapç™»å½•">éªŒè¯LDAPç™»å½•</h1>
<p>ä½¿ç”¨<code>getent</code>å‘½ä»¤æ¥ä»LDAPæœåŠ¡ç«¯è·å–æ¡ç›®</p>
<pre><code>getent passwd raj
</code></pre>
<p>è¾“å‡ºï¼š</p>
<pre><code>raj:x:9999:100:Raj [Admin (at) ITzGeek]:/home/raj:/bin/bash
</code></pre>
<p>ä¸ºäº†éªŒè¯ï¼Œåœ¨å®¢æˆ·ç«¯æœºå™¨ä¸Šä½¿ç”¨LDAPç”¨æˆ·<code>raj</code>ç™»å½•</p>
<pre><code>ssh raj@192.168.33.12
</code></pre>
<p><img src="https://mrpingan.github.io/post-images/1567846300534.png" alt=""><br>
ç™»å½•æˆåŠŸä¹‹åï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªå®¶ç›®å½•ï¼Œç”±äºæˆ‘æ˜¯ç¬¬äºŒæ¬¡ç™»å½•ï¼Œæ‰€ä»¥çœ‹ä¸åˆ°åˆ›å»ºå®¶ç›®å½•çš„æç¤ºä¿¡æ¯ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[confluenceç¦ç”¨å¿˜è®°å¯†ç åŠŸèƒ½]]></title>
        <id>https://mrpingan.github.io/post/confluence-jin-yong-wang-ji-mi-ma-gong-neng</id>
        <link href="https://mrpingan.github.io/post/confluence-jin-yong-wang-ji-mi-ma-gong-neng">
        </link>
        <updated>2019-09-04T04:36:56.000Z</updated>
        <content type="html"><![CDATA[<p>ç¦ç”¨å¿˜è®°å¯†ç åŠŸèƒ½å¾ˆç®€å•ï¼Œåªéœ€è¦å¢åŠ ä¸€ä¸ªcsså°±å¯ä»¥ã€‚<br>
ä½¿ç”¨ç®¡ç†å‘˜ç™»å½•<br>
<img src="https://mrpingan.github.io/post-images/1567572057774.png" alt=""><br>
å¢åŠ æ ·å¼</p>
<pre><code>#forgot-password {
    display:none;
}
</code></pre>
<p>ç„¶åï¼Œåœ¨ç™»å½•ç•Œé¢å°±çœ‹ä¸åˆ°&quot;å¿˜è®°å¯†ç &quot;çš„é€‰é¡¹äº† ã€‚å…¶å®åªæ˜¯åœ¨å‰ç«¯é¡µé¢ä¸Šéšè—äº†ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[mavenæ‰“åŒ…æ ˆæº¢å‡ºçš„é—®é¢˜]]></title>
        <id>https://mrpingan.github.io/post/maven-da-bao-zhan-yi-chu-de-wen-ti</id>
        <link href="https://mrpingan.github.io/post/maven-da-bao-zhan-yi-chu-de-wen-ti">
        </link>
        <updated>2019-08-29T15:01:36.000Z</updated>
        <content type="html"><![CDATA[<p>ä»Šå¤©ä½¿ç”¨<code>mvn</code>æ‰“åŒ…Javaé¡¹ç›®çš„æ—¶å€™ï¼Œå‡ºç°äº†æ ˆæº¢å‡ºï¼Œéƒ¨åˆ†é”™è¯¯æ—¥å¿—å¦‚ä¸‹ï¼š</p>
<pre><code>Exception in thread &quot;main&quot; java.lang.StackOverflowError
	at java.util.regex.Pattern$Branch.match(Pattern.java:4502)
	at java.util.regex.Pattern$GroupHead.match(Pattern.java:4556)
	at java.util.regex.Pattern$Loop.match(Pattern.java:4683)
	at java.util.regex.Pattern$GroupTail.match(Pattern.java:4615)
	at java.util.regex.Pattern$BranchConn.match(Pattern.java:4466)
	at java.util.regex.Pattern$CharProperty.match(Pattern.java:3694)
	at java.util.regex.Pattern$Branch.match(Pattern.java:4502)
	at java.util.regex.Pattern$GroupHead.match(Pattern.java:4556)
</code></pre>
<p>è§£å†³æ–¹æ³•ï¼š<br>
è°ƒæ•´<code>maven</code>çš„æ ˆå¤§å°<br>
é€šè¿‡<code>which mvn</code>æ‰¾åˆ°<code>mvn</code>å‘½ä»¤</p>
<pre><code>root@saas3.0_jumper:~# which mvn
/usr/local/maven/bin/mvn
</code></pre>
<p>ç¼–è¾‘<code>/usr/local/maven/bin/mvn</code>,åœ¨æ–‡ä»¶å¼€å¤´æ·»åŠ <code>MAVEN_OPTS</code>ç¯å¢ƒå˜é‡ï¼Œ</p>
<pre><code># -----------------------------------------------------------------------------
# Apache Maven Startup Script
#
# Environment Variable Prerequisites
#
#   JAVA_HOME       Must point at your Java Development Kit installation.
#   MAVEN_OPTS      (Optional) Java runtime options used when Maven is executed.
#   MAVEN_SKIP_RC   (Optional) Flag to disable loading of mavenrc files.
# -----------------------------------------------------------------------------
MAVEN_OPTS=&quot;-Xss10240k&quot;
</code></pre>
<p>å†æ¬¡æ‰“åŒ…ï¼ŒæˆåŠŸã€‚å¦‚æœè¿™ä¸ªå€¼è¿˜æ˜¯æç¤ºæ ˆæº¢å‡ºçš„è¯ï¼Œå¯ä»¥è€ƒè™‘ç»§ç»­è°ƒæ•´Xssçš„å¤§å°ï¼Œæˆ–è€…åœ¨ä»£ç å±‚é¢æ‰¾åŸå› ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[jenkins è¿æ¥ldap]]></title>
        <id>https://mrpingan.github.io/post/jenkins-lian-jie-ldap</id>
        <link href="https://mrpingan.github.io/post/jenkins-lian-jie-ldap">
        </link>
        <updated>2019-08-21T06:23:35.000Z</updated>
        <content type="html"><![CDATA[<p>jenkinsé»˜è®¤å®‰è£…äº†ldapæ’ä»¶ï¼Œé€šè¿‡ldapå¯ä»¥å¯¹ç”¨æˆ·è¿›è¡Œæˆæƒã€‚ç›¸æ¯”æœ¬åœ°è´¦æˆ·è€Œè¨€ï¼Œæ›´åŠ æ–¹ä¾¿ï¼Œæ›´åŠ å¥½ç®¡ç†ã€‚å½“ç”¨æˆ·ç¦»èŒåï¼Œç›´æ¥åœ¨ldapä¸­å°†è¿™ä¸ªç”¨æˆ·åˆ æ‰å°±å¯ä»¥äº†ã€‚<br>
æƒ³è¦è¾¾åˆ°çš„ç›®çš„ï¼š</p>
<ul>
<li>å¯ä»¥é€šè¿‡ldapç”¨æˆ·è®¤è¯</li>
<li>åªæœ‰æŒ‡å®šçš„ç»„å¯ä»¥ç™»å½•Jenkinsï¼Œä¸åŒçš„ç»„æ‹¥æœ‰çš„æƒé™ä¸åŒ</li>
</ul>
<h3 id="ldapè®¾ç½®">ldapè®¾ç½®</h3>
<p>ldapä¸­è®¾ç½®äº†ä¸¤ä¸ªç»„jenkins-adminã€jenkins-userï¼Œåˆ†åˆ«ç”¨æ¥åœ¨Jenkinsä¸­é…ç½®ä¸åŒçš„æƒé™çš„ã€‚<br>
<img src="https://mrpingan.github.io/post-images/1566377435268.png" alt=""><br>
æ‰€æœ‰çš„ç”¨æˆ·éƒ½å­˜åœ¨äºou=Peopleå¶å­ä¸­çš„èŠ‚ç‚¹ï¼Œæ‰€æœ‰çš„ç»„éƒ½å­˜åœ¨äºou=Groupsä¸­çš„èŠ‚ç‚¹ï¼Œæ¯”å¦‚è¿™å„¿æˆ‘å°±åŠ äº†ä¸€ä¸ªjenkinsèŠ‚ç‚¹åŒæ ·æ˜¯ouå¯¹è±¡ï¼Œå› ä¸ºæˆ‘è¿˜è¦åœ¨ä¸‹é¢å¢åŠ groupOfNamesçš„ç»„å¯¹è±¡ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯groupOfNameså¯ä»¥å¢åŠ æˆå‘˜<br>
<img src="https://mrpingan.github.io/post-images/1566377641597.png" alt=""><br>
æ¯”å¦‚ï¼Œè¿™å„¿æˆ‘å°±å¢åŠ äº†ou=Peopleä¸­çš„å¶å­èŠ‚ç‚¹</p>
<h3 id="jenkinsè®¾ç½®">jenkinsè®¾ç½®</h3>
<p>å¦‚æœé€šè¿‡ç®¡ç†å‘˜è´¦å·ç™»å½•jenkinsï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸ªé€‰é¡¹</p>
<p>æ¥ä¸‹æ¥ï¼Œé€‰æ‹©<code>LDAP</code><br>
<img src="https://mrpingan.github.io/post-images/1566377699539.png" alt=""></p>
<p>å¡«å…¥é…ç½®ï¼Œæˆ‘çš„é…ç½®å¦‚ä¸‹ï¼š<br>
<img src="https://mrpingan.github.io/post-images/1566377716964.png" alt=""><br>
å¡«å†™å®Œæˆåï¼Œå¯ä»¥éªŒè¯ä¸€ä¸‹<br>
<img src="https://mrpingan.github.io/post-images/1566377732941.png" alt=""></p>
<p><img src="https://mrpingan.github.io/post-images/1566377752076.png" alt=""><br>
æ³¨æ„è¿™å„¿çš„ç”¨æˆ·ååªéœ€è¦å¡«å†™<code>User search filter</code>å¡«å†™cnçš„å€¼å³å¯ï¼Œå› ä¸ºæˆ‘çš„dnä¸ºï¼šcn=pingqiangqiang,ou=People,dc=ping,dc=cn<br>
æ‰€ä»¥è¿™å„¿éœ€è¦å¡«å†™ cn={0},å¦‚æœä½ çš„dnä¸ºuid=pingqiangqiang,ou=People,dc=ping,dc=cnï¼Œåˆ™<code>User search filter</code>éœ€è¦å¡«å†™uid={0},ç„¶åé€šè¿‡pingqiangqiangå»éªŒè¯ã€‚å¦‚æœéœ€è¦é€šè¿‡é‚®ç®±éªŒè¯ï¼Œåˆ™<code>User search filter</code>éœ€è¦å¡«å†™mail={0}ã€‚</p>
<p><img src="https://mrpingan.github.io/post-images/1566377766023.png" alt=""><br>
å¦‚æœæµ‹è¯•é€šè¿‡ï¼Œåˆ™ä¼šæ˜¾ç¤ºAuthentication: successfulä¹‹ç±»çš„ä¿¡æ¯ã€‚</p>
<h4 id="jenkinsé…ç½®æƒé™">Jenkinsé…ç½®æƒé™</h4>
<p>è¿˜è®°å¾—æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„ä¸¤ä¸ªç»„ä¹ˆï¼Œjenkins-adminã€jenkins-user<br>
åœ¨æˆ‘çš„ldapä¸­ï¼Œcn=pingqiangqiang è¿™ä¸ªç”¨æˆ·å±äº jenkins-adminç»„ï¼Œcn=test ç”¨æˆ·å±äº jenkins-user ç»„<br>
æŠŠé¡µé¢ä¸‹æ‹‰ï¼Œå¯ä»¥çœ‹åˆ° æˆæƒç­–ç•¥ ç°è±¡ï¼Œç‚¹å‡» å®‰å…¨çŸ©é˜µ ï¼Œç„¶åå°±å¯ä»¥æ·»åŠ å¯¹åº”çš„ç»„æ¥å¯¹ä¸åŒçš„ç»„æ¥æˆæƒï¼Œç»„å†…çš„æˆå‘˜ä¹Ÿä¼šç»§æ‰¿ç»„çš„æƒé™ã€‚<br>
<img src="https://mrpingan.github.io/post-images/1566377786644.png" alt=""></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Django ä¸­çš„ context_processors å¥½å¤„]]></title>
        <id>https://mrpingan.github.io/post/django-zhong-de-context_processors-hao-chu</id>
        <link href="https://mrpingan.github.io/post/django-zhong-de-context_processors-hao-chu">
        </link>
        <updated>2019-06-23T13:48:11.000Z</updated>
        <content type="html"><![CDATA[<h1 id="context_processors"><code>context_processors</code></h1>
<p>ä»å­—é¢ä¸Šç†è§£ä¸ºä¸Šä¸‹æ–‡ï¼Œä¼šå°†è¯·æ±‚å¯¹è±¡ä½œä¸ºå‚æ•°å¹¶ä»¥å­—å…¸çš„æ–¹å¼åˆå¹¶åˆ°contextä¸­è¿”å›ã€‚æ¯”å¦‚ï¼Œä½¿ç”¨<code>render</code>å‡½æ•°çš„æ—¶å€™ï¼Œå°±éœ€è¦è¿”å›contextï¼Œæœ‰äº†<code>context_processors</code>,å°±å¯ä»¥ä¸ç”¨å†å»ç»™æ¨¡æ¿ä¼ é€’è¿‡å¤šçš„å‚æ•°ã€‚åœ¨é»˜è®¤ç”Ÿæˆçš„é…ç½®æ–‡ä»¶<code>settings.py</code>ä¸­ï¼Œé»˜è®¤æ¨¡æ¿å¼•æ“åŒ…å«ä»¥ä¸‹ä¸Šä¸‹æ–‡å¤„ç†å™¨ï¼š</p>
<pre><code class="language-python">['django.template.context_processors.debug',
  'django.template.context_processors.request',
  'django.contrib.auth.context_processors.auth',
  'django.contrib.messages.context_processors.messages',]
</code></pre>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œè¯·æ±‚ä¸Šä¸‹æ–‡é»˜è®¤å¼€å¯<code>django.template.context_processors.csrf</code>ï¼Œè¿™æ˜¯ä¸ºäº†å®‰å…¨è€ƒè™‘ï¼Œè€Œä¸”å·²ç»ç¡¬ç¼–ç äº†ï¼Œä¸èƒ½åœ¨<code>context_processors</code>ä¸­å…³é—­ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨æ¨¡æ¿ä¸­ç›´æ¥ä½¿ç”¨<code>csrf_token</code>çš„åŸå› </p>
<p>æ¯ä¸€ä¸ªå¤„ç†å™¨æœ‰é¡ºåºã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœä¸€ä¸ªå¤„ç†å™¨æ·»åŠ äº†ä¸€ä¸ªå˜é‡åˆ°ä¸Šä¸‹æ–‡ï¼Œç¬¬äºŒä¸ªå¤„ç†å™¨ä¹Ÿæ·»åŠ äº†ä¸€ä¸ªåŒåçš„å˜é‡åˆ°ä¸Šä¸‹æ–‡ï¼Œè¿™æ ·ï¼Œç¬¬äºŒä¸ªæ·»åŠ çš„å˜é‡çš„å€¼ä¼šè¦†ç›–ç¬¬ä¸€ä¸ªã€‚</p>
<h2 id="å†…å»ºçš„æ¨¡æ¿ä¸Šä¸‹æ–‡å¤„ç†å™¨">å†…å»ºçš„æ¨¡æ¿ä¸Šä¸‹æ–‡å¤„ç†å™¨</h2>
<h3 id="djangocontribauthcontext_processorsauth">django.contrib.auth.context_processors.auth</h3>
<p>å¦‚æœè¿™ä¸ªå¤„ç†å™¨å¼€å¯äº†ï¼Œæ¯ä¸€ä¸ªè¯·æ±‚ä¸Šä¸‹æ–‡éƒ½å°†ä¸‹é¢çš„å˜é‡ï¼š</p>
<ul>
<li><strong>user</strong></li>
</ul>
<p>å½“å‰ç™»é™†çš„userå¯¹è±¡ï¼Œæˆ–è€…ä¸€ä¸ªåŒ¿åuserå¯¹è±¡ã€‚å¯ä»¥åœ¨æ¨¡æ¿ä¸­é€šè¿‡ <strong>user.username</strong>è°ƒç”¨</p>
<ul>
<li><code>perms</code></li>
</ul>
<p>å½“å‰ç™»é™†ç”¨æˆ·çš„æ‰€æœ‰å®ä¾‹ã€‚å¯ä»¥åœ¨æ¨¡æ¿ä¸­é€šè¿‡<code>perms.models_name.permission_name</code>è°ƒç”¨</p>
<h3 id="djangotemplatecontext_processorsdebug">django.template.context_processors.debug</h3>
<p>å¦‚æœè¿™ä¸ªé€‰é¡¹å¼€å¯äº†ï¼Œæ¯ä¸€ä¸ªè¯·æ±‚ä¸Šä¸‹æ–‡éƒ½å°†åŒ…å«ä¸‹é¢ä¸¤ä¸ªå˜é‡ã€‚ä½†æ˜¯åªæœ‰ä½ çš„<code>DEBUG</code>è®¾ç½®ä¸º<code>True</code>,è€Œä¸”è¯·æ±‚çš„IPåœ°å€ï¼ˆ<code>request.META['REMOTE_ADDR']</code>ï¼‰åœ¨<code>INTERNAL_IPS</code>è®¾ç½®çš„åˆ—è¡¨ä¸­ï¼š</p>
<ul>
<li>debug</li>
</ul>
<p>å¯ä»¥ä½¿ç”¨è¿™ä¸ªå˜é‡æ¥æµ‹è¯•æ˜¯å¦ä½ æ­£å¤„äº<code>DEBUG</code>æ¨¡å¼</p>
<ul>
<li>sql_queries</li>
</ul>
<p>ä¸€ä¸ª<code>{'sql': ..., 'time': ...}</code>çš„å­—å…¸ï¼Œå±•ç¤ºäº†å½“å‰è¯·æ±‚çš„æ¯ä¸€ä¸ªSQLä»¥åŠæ‰§è¡Œæ—¶é—´ï¼ŒDjangoæœ‰ä¸€ä¸ªswaggeræ’ä»¶å¯ä»¥ã€‚</p>
<h3 id="djangotemplatecontext_processorsi18n">django.template.context_processors.i18n</h3>
<p>è¿™ä¸ªæ˜¯å›½é™…åŒ–çš„ä¸€ä¸ªç»„ä»¶ã€‚å¼€å¯åï¼Œåœ¨æ¨¡æ¿ä¸­å°†å¯ä»¥ä½¿ç”¨ä¸€ä¸‹å˜é‡</p>
<ul>
<li>LANGUAGES</li>
</ul>
<p>å½“å‰çš„<code>LANGUAGES</code>è®¾ç½®</p>
<ul>
<li>LANGUAGE_BIDI</li>
<li>LANGUAGE_CODE</li>
</ul>
<h3 id="djangotemplatecontext_processorsmedia">django.template.context_processors.media</h3>
<p>å¼€å¯åï¼Œæ¯ä¸€ä¸ªè¯·æ±‚ä¸Šä¸‹æ–‡å°†åŒ…å«ä¸€ä¸ª<code>MEDIA_URL</code>å˜é‡ï¼Œå¯ä»¥åœ¨æ¨¡æ¿ä¸­æä¾›<code>MEDIA_URL</code>çš„å€¼</p>
<ul>
<li>MEDIA_URL</li>
</ul>
<h3 id="djangotemplatecontext_processorsstatic">django.template.context_processors.static</h3>
<p>å¼€å¯åï¼Œå¯ä»¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ <code>STATIC_URL</code>å˜é‡ï¼Œå¯ä»¥åœ¨æ¨¡æ¿ä¸­æä¾›<code>STATIC_URL</code>çš„åœ¨<code>setttings.py</code>ä¸­çš„å€¼ï¼Œ</p>
<ul>
<li>STATIC_URL</li>
</ul>
<h3 id="djangotemplatecontext_processorscsrf">django.template.context_processors.csrf</h3>
<p>è¿™ä¸ªå¤„ç†å™¨æä¾›äº†<strong>csrf_token</strong>æ¨¡æ¿tagéœ€è¦çš„tokenï¼Œç”¨æˆ·é¿å…è·¨ç«™è¯·æ±‚æ”»å‡»</p>
<h3 id="djangotemplatecontext_processorsrequest">django.template.context_processors.request</h3>
<p>è¿™ä¸ªå¤„ç†å™¨å¼€å¯åï¼Œæ¯ä¸€ä¸ªå¤„ç†å™¨ä¸Šä¸‹æ–‡éƒ½å°†åŒ…å«ä¸€ä¸ª<code>request</code>å˜é‡ï¼Œå°±æ˜¯å½“å‰çš„<code>HttpRequest</code></p>
<ul>
<li>request</li>
</ul>
<h3 id="djangotemplatecontext_processorstz">django.template.context_processors.tz</h3>
<p>è¿™ä¸ªå¤„ç†å™¨å¼€å¯åï¼Œæ¯ä¸€ä¸ªè¯·æ±‚ä¸Šä¸‹æ–‡éƒ½å°†åŒ…å«ä¸€ä¸ª<code>TIME_ZONE</code>å˜é‡ï¼Œæä¾›å½“å‰çš„æ—¶åŒº</p>
<h3 id="djangocontribmessagescontext_processorsmessages">django.contrib.messages.context_processors.messages</h3>
<p>è¿™ä¸ªå¤„ç†å™¨å¼€å¯åï¼Œæ¯ä¸€ä¸ªè¯·æ±‚ä¸Šä¸‹æ–‡éƒ½å°†åŒ…å«ä¸‹é¢ä¸¤ä¸ªå˜é‡</p>
<ul>
<li>messages</li>
</ul>
<p>é€šè¿‡djangoçš„æ¶ˆæ¯æ¡†æ¶è®¾ç½®çš„messagesçš„åˆ—è¡¨</p>
<ul>
<li>DEFAULT_MESSAGE_LEVELS</li>
</ul>
<p>ä¸€ç»„æ¶ˆæ¯çº§åˆ«åç§°åˆ°å…¶æ•°å€¼çš„æ˜ å°„</p>
<table>
<thead>
<tr>
<th>Level Constant</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>DEBUG</td>
<td>10</td>
</tr>
<tr>
<td>INFO</td>
<td>20</td>
</tr>
<tr>
<td>SUCCESS</td>
<td>25</td>
</tr>
<tr>
<td>WARNING</td>
<td>30</td>
</tr>
<tr>
<td>ERROR</td>
<td>40</td>
</tr>
</tbody>
</table>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hello Gridea]]></title>
        <id>https://mrpingan.github.io/post/hello-gridea</id>
        <link href="https://mrpingan.github.io/post/hello-gridea">
        </link>
        <updated>2018-12-11T16:00:00.000Z</updated>
        <summary type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
]]></summary>
        <content type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
<!-- more -->
<p><a href="https://github.com/getgridea/gridea">Github</a><br>
<a href="http://hvenotes.fehey.com/">Gridea ä¸»é¡µ</a><br>
<a href="http://fehey.com/">ç¤ºä¾‹ç½‘ç«™</a></p>
<h2 id="ç‰¹æ€§">ç‰¹æ€§ğŸ‘‡</h2>
<p>ğŸ“  ä½ å¯ä»¥ä½¿ç”¨æœ€é…·çš„ <strong>Markdown</strong> è¯­æ³•ï¼Œè¿›è¡Œå¿«é€Ÿåˆ›ä½œ</p>
<p>ğŸŒ‰  ä½ å¯ä»¥ç»™æ–‡ç« é…ä¸Šç²¾ç¾çš„å°é¢å›¾å’Œåœ¨æ–‡ç« ä»»æ„ä½ç½®æ’å…¥å›¾ç‰‡</p>
<p>ğŸ·ï¸  ä½ å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œæ ‡ç­¾åˆ†ç»„</p>
<p>ğŸ“‹  ä½ å¯ä»¥è‡ªå®šä¹‰èœå•ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤–éƒ¨é“¾æ¥èœå•</p>
<p>ğŸ’»  ä½ å¯ä»¥åœ¨ <strong>ğ–¶ğ—‚ğ—‡ğ–½ğ—ˆğ—ğ—Œ</strong> æˆ– <strong>ğ–¬ğ–ºğ–¼ğ–®ğ–²</strong> è®¾å¤‡ä¸Šä½¿ç”¨æ­¤å®¢æˆ·ç«¯</p>
<p>ğŸŒ  ä½ å¯ä»¥ä½¿ç”¨ <strong>ğ–¦ğ—‚ğ—ğ—ğ—ğ–» ğ–¯ğ–ºğ—€ğ–¾ğ—Œ</strong> æˆ– <strong>Coding Pages</strong> å‘ä¸–ç•Œå±•ç¤ºï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå¹³å°</p>
<p>ğŸ’¬  ä½ å¯ä»¥è¿›è¡Œç®€å•çš„é…ç½®ï¼Œæ¥å…¥ <a href="https://github.com/gitalk/gitalk">Gitalk</a> æˆ– <a href="https://github.com/SukkaW/DisqusJS">DisqusJS</a> è¯„è®ºç³»ç»Ÿ</p>
<p>ğŸ‡¬ğŸ‡§  ä½ å¯ä»¥ä½¿ç”¨<strong>ä¸­æ–‡ç®€ä½“</strong>æˆ–<strong>è‹±è¯­</strong></p>
<p>ğŸŒ  ä½ å¯ä»¥ä»»æ„ä½¿ç”¨åº”ç”¨å†…é»˜è®¤ä¸»é¢˜æˆ–ä»»æ„ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå¼ºå¤§çš„ä¸»é¢˜è‡ªå®šä¹‰èƒ½åŠ›</p>
<p>ğŸ–¥  ä½ å¯ä»¥è‡ªå®šä¹‰æºæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨ OneDriveã€ç™¾åº¦ç½‘ç›˜ã€iCloudã€Dropbox ç­‰è¿›è¡Œå¤šè®¾å¤‡åŒæ­¥</p>
<p>ğŸŒ± å½“ç„¶ <strong>Gridea</strong> è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ğŸƒ</p>
<p>æœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´</p>
<p>å°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼</p>
<p>ğŸ˜˜ Enjoy~</p>
]]></content>
    </entry>
</feed>